---
title: JAVA Spring boot) ì†Œë¹„ê¸°ë¡ì•± ì†Œë¹„ì¼ê¸° ì„œë²„(Backend) ê°œë°œì¼ì§€ 2 - DB í…Œì´ë¸” ì„¤ê³„ì™€ ìƒì„±(with JPA)
toc: true
toc_sticky: true
toc_label: ëª©ì°¨
published: true
categories:
    - SOIL
tags:
    - Project
    - SOIL
    - Log
    - JPA
    - DB
---

* ì‘ì„±ì¼ : 2022.08.25
* ì‘ì„±ì : í™©ì‹œì•„

* íŒ€ì› : ë°•ìŠ¹ì§€, ì˜¤ì„±ì€, í™©ì‹œì•„
* GitHub Repository : [https://github.com/miro7923/soil](https://github.com/miro7923/soil)<br><br><br>

# ê°œë°œí™˜ê²½
* MacBook Air (M1, 2020)
* OpenJDK 11
* IntelliJ IDEA Community Edition
* Spring Boot 2.7.3(ì˜ˆì •)
* MySQL Workbench 8.0.28<br><br><br>

# ê¸°ê°„
* 2022.8.15 ~ <br><br><br>

# ì£¼ì œ
* ì˜¤ëŠ˜ì˜ ì†Œë¹„ì— ëŒ€í•œ ê¸°ì–µê³¼ ê°ì •ì„ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê¸°ê³  ë‚˜ì¤‘ì— ë˜ëŒì•„ë³´ëŠ” ì‹œê°„ì´ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤ëŠ” ìƒê°ì— ì§„í–‰í•˜ê²Œ ëœ í”„ë¡œì íŠ¸ì´ë‹¤.
* ìƒˆë¡œ ì‚° ë¬¼ê±´ì˜ ì‚¬ì§„ì„ ì°ê³  ê·¸ì— ëŒ€í•œ ê°ìƒì„ í•¨ê»˜ ê¸€ë¡œ ë‚¨ê¸¸ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ë©”ì¸ìœ¼ë¡œ ì œì‘í•  ê²ƒì´ë‹¤.<br><br><br>

# ì§„í–‰ìƒí™©
* ì•±ì— í•„ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì„ ì„¤ê³„í•˜ê³  ìƒì„±í–ˆë‹¤.
* DB í…Œì´ë¸”ì˜ ìƒì„±ì—ëŠ” `JPA`ë¥¼ ì‚¬ìš©í–ˆë‹¤.

## ë„ë©”ì¸ ëª¨ë¸ê³¼ í…Œì´ë¸” ì„¤ê³„

* ëª¨ë“  ì§„í–‰ì€ [ì‹¤ì „! ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ JPA í™œìš©1 - ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8-JPA-%ED%99%9C%EC%9A%A9-1/dashboard) ê°•ì˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í–ˆë‹¤.

<p align="center"><img src="../../assets/images/soil_log_02_1.png" width="400"></p>

* ê°•ì˜ì˜ íë¦„ëŒ€ë¡œ ë¨¼ì € ëŒ€ëµì ì¸ ì—”í‹°í‹°ë“¤ì˜ ê´€ê³„ë¥¼ ì„¤ì •í–ˆë‹¤.
* ì†Œë¹„ì¼ê¸°ì—ëŠ” ì´ 5ê°œì˜ í…Œì´ë¸”ì´ ì¡´ì¬í•œë‹¤.
* í•œ ëª…ì˜ íšŒì›ì€ ì—¬ëŸ¬ ê°œì˜ ì¼ê¸°ì™€ ê²Œì‹œê¸€, ëŒ“ê¸€ì„ ì‘ì„±í•  ìˆ˜ ìˆê³  ì—¬ëŸ¬ ê°œì˜ ì¹´í…Œê³ ë¦¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë‚˜ë¨¸ì§€ 4ê°œì˜ í…Œì´ë¸”ê³¼ì˜ ê´€ê³„ë¥¼ `ì¼ëŒ€ë‹¤`ë¡œ ì„¤ì •í–ˆë‹¤.
* í•˜ë‚˜ì˜ ì¹´í…Œê³ ë¦¬ëŠ” ì—¬ëŸ¬ ê°œì˜ ì¼ê¸°ì— ì‚¬ìš©ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë‘˜ì˜ ê´€ê³„ëŠ” `ì¼ëŒ€ë‹¤`ë¡œ ì„¤ì •í–ˆë‹¤.
* í•˜ë‚˜ì˜ ê²Œì‹œê¸€ì— ì—¬ëŸ¬ ê°œì˜ ëŒ“ê¸€ì´ ì‘ì„±ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë‘˜ì˜ ê´€ê³„ëŠ” `ì¼ëŒ€ë‹¤`ë¡œ ì„¤ì •í–ˆë‹¤.

<p align="center"><img src="../../assets/images/soil_log_02_2.png" width="800"></p>

* ìœ„ì—ì„œ ì„¤ì •í•œ ê´€ê³„ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ì´ì–´ê·¸ë¨ì„ ë§Œë“¤ì—ˆë‹¤.
* êµµê²Œ í‘œì‹œí•œ í…ìŠ¤íŠ¸ëŠ” ì™¸ë˜í‚¤ì´ë‹¤.

<p align="center"><img src="../../assets/images/soil_log_02_3.png" width="800"></p>

* ìµœì¢… ì •ë¦¬!

## ì—”í‹°í‹° í´ë˜ìŠ¤ ìƒì„±
* ì—”í‹°í‹° í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œ ë’¤ `JPA`ë¡œ ë§¤í•‘ì„ í•´ ì£¼ì—ˆë‹¤.

### Member

```java
@Entity
@Getter
public class Member {

    @Id @GeneratedValue
    @Column(name = "member_id")
    private Long id;

    @Column(nullable = false)
    private String name;
    private String password;
}
```

### Diary

```java
@Entity
@Getter
public class Diary {

    @Id @GeneratedValue
    @Column(name = "diary_id")
    private Long id;

    @ManyToOne(fetch = LAZY)
    @JoinColumn(name = "member_id", nullable = false)
    private Member member;

    @ManyToOne(fetch = LAZY)
    @JoinColumn(name = "category_id", nullable = false)
    private Category category;

    @Column(nullable = false)
    private String title;

    @Column(nullable = false)
    private String content;

    @Column(nullable = false)
    private LocalDateTime date;
    private String photo;
    private int price;
}
```

### Category

```java
@Entity
@Getter
public class Category {

    @Id @GeneratedValue
    @Column(name = "category_id")
    private Long id;

    @ManyToOne(fetch = LAZY)
    @JoinColumn(name = "member_id", nullable = false)
    private Member member;

    @Column(nullable = false)
    private String name;
}
```

### Board

```java
@Entity
@Getter
public class Board {

    @Id @GeneratedValue
    @Column(name = "board_id")
    private Long id;

    @ManyToOne(fetch = LAZY)
    @JoinColumn(name = "member_id", nullable = false)
    private Member member;

    @Column(nullable = false)
    private String content;

    @Column(nullable = false)
    private LocalDateTime date;
    private int readcount;
}
```

### Comment

```java
@Entity
@Getter
public class Comment {

    @Id @GeneratedValue
    @Column(name = "comment_id")
    private Long id;

    @ManyToOne(fetch = LAZY)
    @JoinColumn(name = "member_id", nullable = false)
    private Member member;

    @ManyToOne(fetch = LAZY)
    @JoinColumn(name = "board_id", nullable = false)
    private Board board;

    @Column(nullable = false)
    private String content;
    private LocalDateTime date;
}
```

* ê° í…Œì´ë¸”ì˜ `ID` ì»¬ëŸ¼ëª…ì„ ì§€ì •í•´ ì£¼ê³  ì™¸ë˜ í‚¤ë„ ë§¤í•‘í•´ ì£¼ì—ˆë‹¤. 
* ì—”í‹°í‹° ì„¤ê³„ ì‹œ `Setter`ë¥¼ í†µí•œ ë¬´ë¶„ë³„í•œ ë°ì´í„° ë³€ê²½ ë°©ì§€ë¥¼ ìœ„í•´ `Getter`ë§Œ ì‚¬ìš©í–ˆë‹¤.
* ëª¨ë“  ì—°ê´€ê´€ê³„ëŠ” ì§€ì—°ë¡œë”©ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì›ì¹™ì´ê¸° ë•Œë¬¸ì— `@ManyToOne` ì–´ë…¸í…Œì´ì…˜ì— `LAZY` ì†ì„±ê°’ì„ ì„¤ì •í•´ ì£¼ì—ˆë‹¤. ì™œëƒë©´ `XToOne` ì–´ë…¸í…Œì´ì…˜ë“¤ì€ ê¸°ë³¸ê°’ì´ `EAGER`ë¼ì„œ ì¦‰ì‹œë¡œë”©ì´ê¸° ë•Œë¬¸ì´ë‹¤. ëª¨ë“  ì—°ê´€ê´€ê³„ë¥¼ ì§€ì—°ë¡œë”©ìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•˜ëŠ” ì´ìœ ëŠ” ì¦‰ì‹œë¡œë”©ì€ ì˜ˆì¸¡ì´ ì–´ë µê³  ì‹¤í–‰ëœ SQLì„ ì¶”ì í•˜ëŠ” ê²ƒì´ ì–´ë µë‹¤. ê·¸ë¦¬ê³  `JPQL` ì‹¤í–‰ ì‹œ `N+1` ë¬¸ì œê°€ ìì£¼ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì¦‰ì‹œë¡œë”©ì€ ì§€ì–‘í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ë°ì´í„° í•˜ë‚˜ë§Œ ì¡°íšŒí•˜ë ¤ í–ˆëŠ”ë° ì—¬ëŸ¬ ì»¬ëŸ¼ ê°ê°ì„ ëŒ€ìƒìœ¼ë¡œ SQLì´ ì‹¤í–‰ ë¼ë©´ì„œ ê°™ì€ ë°ì´í„°ê°€ ì—¬ëŸ¬ ê°œê°€ ìŸì•„ì§€ëŠ” ìƒí™©ì´ ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤.
* `jpa-hibernate-ddl-auto`ëŠ” `update`ë¡œ ì„¤ì •í–ˆë‹¤.
* ì´ë ‡ê²Œ ì„¤ì •í•œ í›„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë‹ˆê¹Œ í…Œì´ë¸” ìƒì„± ì¿¼ë¦¬ê°€ ì‹¤í–‰ë˜ë©´ì„œ ì™¸ë˜ í‚¤ë„ ëª¨ë‘ ì„¤ì •í•´ ì£¼ê³  `Null`ì„ í—ˆìš©í•˜ì§€ ì•Šì€ ì»¬ëŸ¼ì—ëŠ” ê·¸ê²ƒë„ ë‹¤ ì„¤ì •í•´ ì£¼ê³ ... ì •ë§ í¸í–ˆë‹¤. í…Œì´ë¸” ì„¤ì •ê°’ì„ ë°”ê¾¸ê³  ìƒˆë¡œ ìƒì„±í•˜ê³  ì‹¶ìœ¼ë©´ `create` ì˜µì…˜ìœ¼ë¡œ ì„¤ì •í•˜ê³  ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì¬ì‹¤í–‰í•˜ë©´ í…Œì´ë¸” ë“œë¡­ í›„ ì¬ìƒì„±ë˜ê³ ... ë„ˆë¬´ë„ˆë¬´ í¸í–ˆë‹¤. ğŸ˜³ ì˜ˆì „ì— ì›Œí¬ë²¤ì¹˜ì—ì„œ í•˜ë‚˜í•˜ë‚˜ ìƒì„±í•˜ë˜ ì‹œì ˆì—” ì°¸ í˜ë“¤ì—ˆë‹¤. í•™ì›ì—ì„  ì™œ ê·¸ë ‡ê²Œ ë…¸ê°€ë‹¤ë¥¼ ì‹œì¼°ì„ê¹Œ...<br><br><br>

# ì°¸ê³ 
* [ì‹¤ì „! ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ JPA í™œìš©1 - ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8-JPA-%ED%99%9C%EC%9A%A9-1/dashboard)
