---
title: JAVA Spring boot) ì†Œë¹„ê¸°ë¡ì•± ì†Œë¹„ì¼ê¸° ì„œë²„(Backend) ê°œë°œì¼ì§€ 5 - ì„œë²„ì—ì„œ CORS ì°¨ë‹¨ë¬¸ì œ í•´ê²°í•˜ê¸°!!
toc: true
toc_sticky: true
toc_label: ëª©ì°¨
published: true
categories:
    - SOIL
tags:
    - Project
    - SOIL
    - Log
    - CORS
---

* ì‘ì„±ì¼ : 2022.08.30
* ì‘ì„±ì : í™©ì‹œì•„

* íŒ€ì› : ë°•ìŠ¹ì§€, í™©ì‹œì•„
* GitHub Repository : [https://github.com/miro7923/soil](https://github.com/miro7923/soil)<br><br><br>

# ê°œë°œí™˜ê²½
* MacBook Air (M1, 2020)
* OpenJDK 11
* IntelliJ IDEA Community Edition
* Spring Boot 2.7.3
* MySQL Workbench 8.0.28<br><br><br>

# ê¸°ê°„
* 2022.8.15 ~ <br><br><br>

# ì£¼ì œ
* ì˜¤ëŠ˜ì˜ ì†Œë¹„ì— ëŒ€í•œ ê¸°ì–µê³¼ ê°ì •ì„ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê¸°ê³  ë‚˜ì¤‘ì— ë˜ëŒì•„ë³´ëŠ” ì‹œê°„ì´ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤ëŠ” ìƒê°ì— ì§„í–‰í•˜ê²Œ ëœ í”„ë¡œì íŠ¸ì´ë‹¤.
* ìƒˆë¡œ ì‚° ë¬¼ê±´ì˜ ì‚¬ì§„ì„ ì°ê³  ê·¸ì— ëŒ€í•œ ê°ìƒì„ í•¨ê»˜ ê¸€ë¡œ ë‚¨ê¸¸ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ë©”ì¸ìœ¼ë¡œ ì œì‘í•  ê²ƒì´ë‹¤.<br><br><br>

# ì§„í–‰ìƒí™©
* ëª¨ë“  ì§„í–‰ì€ [ìŠ¤í”„ë§ MVC 2í¸ - ë°±ì—”ë“œ ì›¹ ê°œë°œ í™œìš© ê¸°ìˆ ](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-2/dashboard) ê°•ì˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í–ˆë‹¤.

* ì–´ì œ ë§Œë“  API ì„œë²„ê°€ í¬ìŠ¤íŠ¸ë§¨ì—ì„  ìš”ì²­ ì‘ë‹µì´ ì˜ ë˜ê¸¸ë˜ ë¬¸ì œê°€ ì—†ì„ ì¤„ ì•Œì•˜ìœ¼ë‚˜... í”„ë¡ íŠ¸ ê°œë°œìê°€ ì‹¤ì œ ì›¹ í™”ë©´ ê°œë°œì„ ì§„í–‰í•˜ë©° ìš”ì²­ì„ ë³´ë‚´ê³  ì‘ë‹µì„ ë°›ëŠ” ê³¼ì •ì—ì„œ `CORS` ì •ì±…ì— ë§‰í˜€ ì‘ë‹µì„ ì œëŒ€ë¡œ ë°›ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ìƒê²¼ë‹¤. ì£¼ë¥µ...ğŸ¥²
* ìœ„ ë¬¸ì œê°€ ìƒê¸´ ì´ìœ ëŠ” í”„ë¡ íŠ¸ ê°œë°œìëŠ” ë‚´ ì»´í“¨í„°ì˜ ë¡œì»¬ ì„œë²„ë¥¼ `ngrok`ìœ¼ë¡œ í¬íŠ¸í¬ì›Œë”© ì‹œí‚¨ ì£¼ì†Œë¡œ ìš”ì²­ì„ ë³´ë‚´ê³  ì‘ë‹µì„ ë°›ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë˜ì„œ ì™¸ë¶€ `URL`ì´ë¼ `CORS`ì— ì°¨ë‹¨ëœ ê²ƒ ê°™ì•˜ë‹¤.

## CORS ì¸í„°ì…‰í„° ìƒì„±
* ë¨¼ì € ìŠ¤í”„ë§ ì¸í„°ì…‰í„°ë¥¼ ì´ìš©í•´ ì¸í„°ì…‰í„° í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.

```java
package august.soil.web.interceptor;

import lombok.extern.slf4j.Slf4j;
import org.springframework.web.servlet.HandlerInterceptor;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@Slf4j
public class CorsInterceptor implements HandlerInterceptor {
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
        String requestURI = request.getRequestURI();
        log.info("Cors requestURI [{}]", requestURI); // ë¡œê·¸ í™•ì¸ìš©ìœ¼ë¡œ ì°ìŒ

        response.setHeader("Access-Control-Allow-Origin", "http://localhost:8090");
        response.setHeader("Access-Control-Allow-Credentials", "true");
        response.setHeader("Access-Control-Allow-Methods", "*");
        response.setHeader("Access-Control-Max-Age", "3600");
        response.setHeader("Access-Control-Allow-Headers",
                "Origin, X-Requested-With, Content-Type, Accept, Authorization");

        if ("OPTIONS".equalsIgnoreCase(request.getMethod())) {
            response.setStatus(HttpServletResponse.SC_OK);
        }

        return true;
    }
}
```

## WebConfig
* ë§Œë“  ì¸í„°ì…‰í„°ë¥¼ í˜¸ì¶œí•  í´ë˜ìŠ¤ ìƒì„± í›„ í˜¸ì¶œí•œë‹¤.

```java
package august.soil;

import august.soil.web.interceptor.CorsInterceptor;
import august.soil.web.interceptor.LogInterceptor;
import august.soil.web.interceptor.LoginCheckInterceptor;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new CorsInterceptor())
                .order(1);
    }
}
```

* ê·¸ëŸ¼ ë!ì¸ë° í”„ë¡ íŠ¸ ê°œë°œìê°€ ì¼ì´ ìˆëŠ”ì§€ ì•„ì§ í…ŒìŠ¤íŠ¸ë¥¼ í•´ ë³´ì§€ ëª»í•´ì„œ ì •í™•í•œ ë™ì‘ ìœ ë¬´ëŠ” ëª¨ë¥´ê² ë‹¤... í¬ìŠ¤íŠ¸ë§¨ìœ¼ë¡œ ìš”ì²­ì„ ë³´ëƒˆì„ ë•Œ ì¸í„°ì…‰í„°ê°€ í˜¸ì¶œë˜ëŠ” ë¡œê·¸ëŠ” í™•ì¸ë˜ì–´ì„œ ë™ì‘ì´ ë˜ë‚˜ë³´ë‹¤ í•˜ê³  ì¼ë‹¨ì€ ëŒ€ê¸° ì¤‘ì¸ ìƒíƒœ...<br><br><br>

# ì •ë¦¬
* í”„ë¡ íŠ¸ì™€ ë°±ë‹¨ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì‘ì—…í•˜ëŠ” ê²ƒì— ìƒê°ë³´ë‹¤ ì‹ ê²½ì“¸ ê²ƒì´ ë§ë‹¤ëŠ” ê²ƒì„.. ê¹¨ë‹¬ì•˜ë‹¤... í™”ì´íŒ…...!<br><br><br> 

# ì°¸ê³ 
* [ìŠ¤í”„ë§ MVC 2í¸ - ë°±ì—”ë“œ ì›¹ ê°œë°œ í™œìš© ê¸°ìˆ ](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-2/dashboard)
