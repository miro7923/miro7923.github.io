I"¤&<ul>
  <li>ì‘ì„±ì¼ : 2022.05.18</li>
  <li>
    <p>ì‘ì„±ì : í™©ìœ ì§„</p>
  </li>
  <li>íŒ€ì› : ê¹€ì§„ì˜, ë°•ìŠ¹ì§€, ë°˜í˜„ë¹ˆ, ì˜¤ì„±ì€, ì˜¤ì€í˜„, í™©ìœ ì§„</li>
  <li>íŒ€ì¥ : í™©ìœ ì§„</li>
  <li>ë¶€íŒ€ì¥ : ì˜¤ì„±ì€</li>
  <li>GitHub Repository : <a href="https://github.com/miro7923/Uno-Mas">https://github.com/miro7923/Uno-Mas</a><br /><br /><br /></li>
</ul>

<h1 id="ê°œë°œí™˜ê²½">ê°œë°œí™˜ê²½</h1>
<ul>
  <li>MacBook Air (M1, 2020)</li>
  <li>OpenJDK 8</li>
  <li>Spring Tool Suite 4.14.0</li>
  <li>Spring framework 4.3.1.RELEASE</li>
  <li>Tomcat 8.5</li>
  <li>MySQL Workbench 8.0.19<br /><br /><br /></li>
</ul>

<h1 id="ê¸°ê°„">ê¸°ê°„</h1>
<ul>
  <li>2022.4.13 ~ 2022.5.27<br /><br /><br /></li>
</ul>

<h1 id="ì£¼ì œ">ì£¼ì œ</h1>
<ul>
  <li>ì›¹ ë°±ì—”ë“œ ìˆ˜ì—… ì¤‘ ë§ˆì§€ë§‰ ê³¼ì œë¡œ íŒ€ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ê²Œ ë˜ì—ˆë‹¤.</li>
  <li>ì¡°ê±´ì€ <code class="language-plaintext highlighter-rouge">Spring</code> ê¸°ë°˜ìœ¼ë¡œ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì œì‘í•˜ëŠ” ê²ƒì´ë‹¤.</li>
  <li>ì´ íŒ€ì›ì€ 6ëª…ì´ë©°, ìš°ë¦¬ íŒ€ì€ <code class="language-plaintext highlighter-rouge">1ì¸ ê°€êµ¬ë¥¼ ìœ„í•œ ì‡¼í•‘ëª°</code>ì„ ì£¼ì œë¡œ ì •í–ˆë‹¤.</li>
  <li>íŒ€ ì´ë¦„ìœ¼ë¡œ ì •í•´ì§„ <code class="language-plaintext highlighter-rouge">Uno mÃ¡s</code>ëŠ” ìŠ¤í˜ì¸ì–´ë¡œ <code class="language-plaintext highlighter-rouge">í•˜ë‚˜ ë”</code>ë¼ëŠ” ëœ»ì´ë‹¤. <br /><br /><br /></li>
</ul>

<h1 id="ì§„í–‰ìƒí™©">ì§„í–‰ìƒí™©</h1>

<p align="center"><img src="../../assets/images/unomas_uploadProdImg2.png" width="900" /></p>

<ul>
  <li>ê´€ë¦¬ììš© ìƒí’ˆ ë“±ë¡ í˜ì´ì§€ì—ì„œ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ìƒí’ˆ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê³  ë“±ë¡ëœ ì´ë¯¸ì§€ë¥¼ ë¯¸ë¦¬ë³¼ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆë‹¤.</li>
</ul>

<h2 id="productmapperxml">productMapper.xml</h2>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">"setProduct"</span><span class="nt">&gt;</span>
    INSERT INTO products(prod_name, prod_category, prod_price, prod_stock, prod_expire, 
                    prod_keep, prod_weight, prod_country, prod_sellunit, prod_explain, prod_packing, 
                    prod_discntrate, prod_image1, prod_image2, prod_image3, prod_image4)
    VALUES (#{prod_name}, #{prod_category}, #{prod_price}, #{prod_stock}, #{prod_expire}, 
            #{prod_keep}, #{prod_weight}, #{prod_country}, #{prod_sellunit}, #{prod_explain}, #{prod_packing},
            #{prod_discntrate}, #{prod_image1}, #{prod_image2}, #{prod_image3}, #{prod_image4})
<span class="nt">&lt;/insert&gt;</span>
</code></pre></div></div>

<ul>
  <li>ì´ë¯¸ì§€ íŒŒì¼ì„ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì—…ë¡œë“œ í•˜ê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">DB</code>ì—ëŠ” íŒŒì¼ëª…ë§Œ ë„£ì–´ì£¼ë©´ ëœë‹¤.</li>
</ul>

<h2 id="servlet-contextxml">servlet-context.xml</h2>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

## ProductController.java

```java
@RequestMapping(value = "/modify_review", method = RequestMethod.POST)
public String modifyReviewPOST(HttpServletRequest request, 
        @RequestParam(value = "review_image", required = false) MultipartFile file) throws Exception {
    BoardReviewVO vo = new BoardReviewVO();
    vo.setReview_num(Integer.parseInt(request.getParameter("review_num")));
    vo.setProd_num(Integer.parseInt(request.getParameter("prod_num")));
    vo.setReview_content(request.getParameter("review_content"));
    vo.setReview_rating(Float.parseFloat(request.getParameter("review_rating")));
    vo.setReview_title(request.getParameter("review_title"));
    vo.setUser_num(Integer.parseInt(request.getParameter("user_num")));
		
    String reviewImg = service.getReviewImg(vo.getReview_num());
    String uploadImgName = request.getParameter("uploadImgName");

    // ì—…ë¡œë“œ ëœ íŒŒì¼ì´ ìˆì„ ë•Œ 
    if (!file.isEmpty()) {
        // ê¸°ì¡´ì— ì €ì¥ëœ ì´ë¯¸ì§€ê°€ ì—†ëŠ” ê²½ìš° íŒŒì¼ì´ë¦„ ìƒì„±
        if (reviewImg == null) {
            reviewImg = convertImgName(file.getOriginalFilename(), vo.getReview_num());
        }
        
        // íŒŒì¼ ìƒˆë¡œ ì—…ë¡œë“œ 
        File targetFile = new File(reviewImgUploatPath, reviewImg);
        FileCopyUtils.copy(file.getBytes(), targetFile);
        vo.setReview_image(reviewImg);
    }
    // ì—…ë¡œë“œ ëœ íŒŒì¼ì´ ì—†ì„ ë•Œ
    else { 
        // ê¸°ì¡´ì— ì—…ë¡œë“œ ëœ íŒŒì¼ì´ ì—†ê±°ë‚˜ ê¸€ì„ ìˆ˜ì •í•˜ë©° ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•œ ê²½ìš°
        if (uploadImgName.equals("ì´ë¯¸ì§€ ì„ íƒ")) {
            if (reviewImg != null) {
                // ê¸°ì¡´ì— ì—…ë¡œë“œ ëœ íŒŒì¼ì´ ìˆìœ¼ë©´ ì„œë²„ì—ì„œ ì‚­ì œ
                File f = new File(reviewImgUploatPath + File.separator + reviewImg);

                if (f.exists())
                    f.delete();
            }
            
            // ê¸°ì¡´ íŒŒì¼ëª… ì‚­ì œ
            vo.setReview_image(null);
        }
        // ê¸°ì¡´ì— ì—…ë¡œë“œ ëœ íŒŒì¼ì´ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ì‚¬ìš©
        else {
            vo.setReview_image(uploadImgName);
        }
    }
		
    service.modifyReview(vo);
		
    return "redirect:/product/product_detail?prod_num=" + vo.getProd_num();
}
</code></pre></div></div>

<ul>
  <li>ë§¤í¼ì— í›„ê¸°ê¸€ì— ëŒ€í•œ ì •ë³´ë¥¼ ë³´ë‚¼ ë•Œ <code class="language-plaintext highlighter-rouge">BoardReviewVO</code>ë¥¼ ì‚¬ìš©í•´ì„œ ë³´ë‚´ëŠ”ë° ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ë•Œ ì´ë¯¸ì§€ íŒŒì¼ì— ëŒ€í•œ ì •ë³´ë„ ì„¤ì •í•´ ì£¼ì§€ ì•Šìœ¼ë©´ <code class="language-plaintext highlighter-rouge">VO</code> ì†ì˜ ì´ë¯¸ì§€ íŒŒì¼ëª… í•„ë“œëŠ” <code class="language-plaintext highlighter-rouge">null</code>ë¡œ ë‚¨ì•„ìˆëŠ” ìƒíƒœë¡œ ë§¤í¼ì— ì „ë‹¬ë  ê²ƒì´ë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´ ê¸°ì¡´ì— ì„œë²„ì— ì—…ë¡œë“œ ëœ ì´ë¯¸ì§€íŒŒì¼ì´ ìˆëŠ”ë°ë„ DB ë°ì´í„° ìƒì—ì„œëŠ” ì´ë¯¸ì§€ íŒŒì¼ëª… ì •ë³´ê°€ ì—†ê¸° ë•Œë¬¸ì— í™”ë©´ì— ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë˜ì„œ ì²¨ë¶€íŒŒì¼ì´ í¬í•¨ëœ ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ë•Œì—” ìœ„ì™€ ê°™ì´ ë¶„ê¸°ë¥¼ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•´ ì£¼ê²Œ í–ˆë‹¤.<br /><br /><br /></li>
</ul>

<h1 id="êµ¬í˜„í•˜ë©°-í–ˆë˜-ê³ ë¯¼">êµ¬í˜„í•˜ë©° í–ˆë˜ ê³ ë¯¼</h1>
<ul>
  <li>ê°€ì¥ ê³ ë¯¼í–ˆë˜ ê²ƒì€ ì‚¬ìš©ìê°€ ê¸€ì„ ìˆ˜ì •í•˜ë©´ì„œ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí–ˆëŠ”ì§€ ì•„ë‹Œì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ì—ˆë‹¤. ë‹¨ìˆœíˆ <code class="language-plaintext highlighter-rouge">file</code>ë¡œ ë„˜ì–´ì˜¨ ì •ë³´ê°€ ìˆê³  ì—†ê³ ë¡œ ë”°ì§ˆ ìˆ˜ ì—†ì—ˆê¸° ë•Œë¬¸ì´ë‹¤. <code class="language-plaintext highlighter-rouge">file</code>íƒ€ì…ì˜ ì¸í’‹íƒœê·¸ íŠ¹ì„±ìƒ ê²Œì‹œê¸€ì„ ì‘ì„±í•  ë•Œ íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ì§€ ì•Šìœ¼ë©´ ì‚¬ì§„ ì²¨ë¶€ ì˜ì—­ì˜ ì‚­ì œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì„œ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•´ë„ ê°’ì´ ë¹„ì–´ìˆê³  ê¸°ì¡´ì— ì—…ë¡œë“œí–ˆë˜ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ëŠ” ë™ì‘ì„ í•˜ì§€ ì•Šì•„ë„ ê°’ì´ ë¹„ì–´ìˆë‹¤. ì¦‰ ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ë•Œ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¥¼ ì²¨ë¶€í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ í•­ìƒ ë¹„ì–´ìˆëŠ” ìƒíƒœë¡œ ì „ì†¡ë˜ëŠ” ê²ƒì´ë‹¤.</li>
</ul>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;c:choose&gt;</span>
    <span class="nt">&lt;c:when </span><span class="na">test=</span><span class="s">"</span><span class="si">${</span><span class="n">vo</span><span class="o">.</span><span class="na">review_image</span> <span class="o">==</span> <span class="kc">null</span> <span class="si">}</span><span class="s">"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"uploadImgName"</span> <span class="na">id=</span><span class="s">"uploadImgName"</span> <span class="na">value=</span><span class="s">"ì´ë¯¸ì§€ ì„ íƒ"</span>
            <span class="na">readonly</span> <span class="na">name=</span><span class="s">"uploadImgName"</span><span class="nt">&gt;</span> 
    <span class="nt">&lt;/c:when&gt;</span>
    <span class="nt">&lt;c:otherwise&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"uploadImgName"</span> <span class="na">id=</span><span class="s">"uploadImgName"</span> <span class="na">value=</span><span class="s">"${vo.review_image }"</span>
            <span class="na">readonly</span> <span class="na">name=</span><span class="s">"uploadImgName"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/c:otherwise&gt;</span>
<span class="nt">&lt;/c:choose&gt;</span>
<span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"site-btn"</span> <span class="na">for=</span><span class="s">"uploadImg"</span> <span class="na">id=</span><span class="s">"uploadBtn"</span><span class="nt">&gt;</span>ì—…ë¡œë“œ<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"site-btn"</span> <span class="na">onclick=</span><span class="s">"removeImg();"</span><span class="nt">&gt;</span>ì‚­ì œ<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">id=</span><span class="s">"uploadImg"</span> <span class="na">name=</span><span class="s">"review_image"</span> <span class="na">oninput=</span><span class="s">"checkFileName();"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<ul>
  <li>ë·° í˜ì´ì§€ UI ë””ìì¸ì„ í•˜ë©° ì—…ë¡œë“œ í•˜ë ¤ëŠ” íŒŒì¼ëª…ì„ ì¶œë ¥í•˜ëŠ” ì¸í’‹ íƒœê·¸ë¥¼ ë¶„ë¦¬í•´ ë’€ê¸° ë•Œë¬¸ì— íŒŒì¼ëª…ì´ ì¶œë ¥ë˜ëŠ” ì¸í’‹ íƒœê·¸ì˜ ê°’ì— ë”°ë¼ ê¸°ì¡´ì— ì—…ë¡œë“œ ëœ ì´ë¯¸ì§€ íŒŒì¼ì˜ ì¡´ì¬ ìœ ë¬´ë¥¼ í™•ì¸í•˜ë„ë¡ ì„¤ê³„í–ˆë‹¤.<br /><br /><br /></li>
</ul>

<h1 id="ë§ˆê°ê¹Œì§€">ë§ˆê°ê¹Œì§€</h1>
<ul>
  <li><code class="language-plaintext highlighter-rouge">D-10</code></li>
</ul>
:ET