I"D><h1 id="ì‚¬ìš©í™˜ê²½">ì‚¬ìš©í™˜ê²½</h1>
<ul>
  <li>MacBook Air (M1, 2020) 16GB</li>
  <li>JDK 8</li>
  <li>Eclipse 2021-12</li>
  <li>tomcat 8.5<br /><br /><br /></li>
</ul>

<h1 id="ì—ëŸ¬ì˜-ë°œìƒ">ì—ëŸ¬ì˜ ë°œìƒ</h1>
<ul>
  <li>ë¬´ìŠ¨ ë²„ê·¸ê°€ ìˆ˜ì •ì„ í•´ë„í•´ë„ ê³„ì† ë‚˜ì˜¤ëŠ”ì§€â€¦ ì–¼ë ëš±ë•… ëŒì•„ê°€ëŠ” ëŠë‚Œì´ë‹¤ ğŸ¥²</li>
  <li>ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ë•Œ ì²¨ë¶€íŒŒì¼ì´ ì‚¬ë¼ì§€ëŠ” ë²„ê·¸ë¥¼ í•´ê²°í–ˆë‹¤ê³  ìƒê°í–ˆëŠ”ë° ì™„ë²½íˆ í•´ê²°ë˜ì§€ ì•Šì•˜ë‹¤.</li>
  <li>ì—¬ì „íˆ ì¼ë¶€ ì¼€ì´ìŠ¤ì—ì„œ ì œëŒ€ë¡œ ì²˜ë¦¬ê°€ ë˜ì§€ ì•Šì•„ <code class="language-plaintext highlighter-rouge">DB</code> ìƒì—ì„œì˜ íŒŒì¼ëª…ì´ <code class="language-plaintext highlighter-rouge">null</code>ë¡œ ë°”ë€ŒëŠ” ë¬¸ì œê°€ ì¡´ì¬í–ˆë‹¤.</li>
  <li>ê·¸ë˜ì„œ ì¢€ ë” ê·¼ë³¸ì ì¸ ì›ì¸ì„ ë– ì˜¬ë ¤ ë³´ì•˜ë‹¤â€¦ ê²Œì‹œê¸€ì„ ìˆ˜ì •í•˜ë©° íŒŒì¼ ì—…ë¡œë“œ ë‹¨ê³„ë¥¼ ê±°ì¹˜ëŠ” ê³¼ì •ì—ì„œ <code class="language-plaintext highlighter-rouge">DTO</code> ìƒì„± ì‹œ íŒŒì¼ëª…ì´ ì§€ì •ë˜ì§€ ì•Šì•„ <code class="language-plaintext highlighter-rouge">null</code>ë¡œ ë‚¨ì•„ìˆëŠ” ê²ƒì´ <code class="language-plaintext highlighter-rouge">DB</code> ìˆ˜ì • ë™ì‘ ë•Œ ë„˜ì–´ì™€ì„œ ë¬¸ì œë¼ë©´ <code class="language-plaintext highlighter-rouge">DB</code>ì— ì ‘ê·¼í•˜ëŠ” ë©”ì„œë“œë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ ë¹ ë¥´ì§€ ì•Šì„ê¹Œâ€¦</li>
</ul>

<h1 id="ë¬¸ì œ-í•´ê²°">ë¬¸ì œ í•´ê²°</h1>
<ul>
  <li>ê¸°ì¡´ì— ì‘ì„±í–ˆë˜ ê²Œì‹œê¸€ ìˆ˜ì • ë©”ì„œë“œ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">int</span> <span class="nf">modifyPost</span><span class="o">(</span><span class="nc">BoardDTO</span> <span class="n">dto</span><span class="o">)</span>
<span class="o">{</span>
    <span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
		
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">getCon</span><span class="o">();</span>
			
        <span class="c1">// ë²ˆí˜¸ë¡œ í•´ë‹¹ ê¸€ ì°¾ê¸°</span>
        <span class="n">sql</span> <span class="o">=</span> <span class="s">"select * from cafe_board where num=?"</span><span class="o">;</span>
        <span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
			
        <span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getNum</span><span class="o">());</span>
			
        <span class="n">rs</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
			
        <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
        <span class="o">{</span>
            <span class="c1">// update ë™ì‘ ìˆ˜í–‰</span>
            <span class="n">sql</span> <span class="o">=</span> <span class="s">"update cafe_board set title=?, image=?, image_uid=?, file=?, file_uid=? content=? where num=?"</span><span class="o">;</span>
            <span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
				
            <span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getTitle</span><span class="o">());</span>
            <span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getContent</span><span class="o">());</span>
            <span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getImage</span><span class="o">());</span>
            <span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getImage_uid</span><span class="o">());</span>
            <span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getFile</span><span class="o">());</span>
            <span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getFile_uid</span><span class="o">());</span>
            <span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getNum</span><span class="o">());</span>
				
            <span class="n">ret</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
				
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"DAO : ê¸€ ìˆ˜ì • ì™„ë£Œ"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">finally</span> <span class="o">{</span>
        <span class="n">closeDB</span><span class="o">();</span>
    <span class="o">}</span>
		
    <span class="k">return</span> <span class="n">ret</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ <code class="language-plaintext highlighter-rouge">DTO</code>ë¥¼ ê·¸ëŒ€ë¡œ ë°›ì•„ì„œ ë°”ë¡œ ì—…ë°ì´íŠ¸ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.</li>
  <li>
    <p>ì´ëŸ¬ë‹ˆ <code class="language-plaintext highlighter-rouge">DTO</code>ì˜ íŒŒì¼ëª… í•„ë“œê°€ <code class="language-plaintext highlighter-rouge">null</code>ë¡œ ë„˜ì–´ì™€ë„ ì•„ë¬´ í•„í„°ë§ ì—†ì´ <code class="language-plaintext highlighter-rouge">DB</code>ì— <code class="language-plaintext highlighter-rouge">null</code>ì´ ì €ì¥ë˜ëŠ” ê²ƒì´ì—ˆë‹¤.
<br /><br /></p>
  </li>
  <li>ìˆ˜ì •í•œ ë©”ì„œë“œ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">int</span> <span class="nf">modifyPost</span><span class="o">(</span><span class="nc">BoardDTO</span> <span class="n">dto</span><span class="o">)</span>
<span class="o">{</span>
    <span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
		
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">getCon</span><span class="o">();</span>
			
        <span class="c1">// ë²ˆí˜¸ë¡œ í•´ë‹¹ ê¸€ ì°¾ê¸°</span>
        <span class="n">sql</span> <span class="o">=</span> <span class="s">"select * from cafe_board where num=?"</span><span class="o">;</span>
        <span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
			
        <span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getNum</span><span class="o">());</span>
			
        <span class="n">rs</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
			
        <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
        <span class="o">{</span>
            <span class="c1">// update ë™ì‘ ìˆ˜í–‰</span>
            <span class="c1">// ìƒˆë¡œ ìˆ˜ì •í•œ ê¸€ì—ì„œ íŒŒì¼ ì •ë³´ê°€ ìˆìœ¼ë©´ ê·¸ê±¸ë¡œ ìˆ˜ì • / ì—†ìœ¼ë©´ ê·¸ëŒ€ë¡œ ë†”ë‘ </span>
            <span class="k">if</span> <span class="o">(</span><span class="n">dto</span><span class="o">.</span><span class="na">getImage</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">dto</span><span class="o">.</span><span class="na">getImage_uid</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">sql</span> <span class="o">=</span> <span class="s">"update cafe_board set image=?, image_uid=? where num=?"</span><span class="o">;</span>
                <span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
					
                <span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getImage</span><span class="o">());</span>
                <span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getImage_uid</span><span class="o">());</span>
                <span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getNum</span><span class="o">());</span>
					
                <span class="n">pstmt</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
            <span class="o">}</span>
				
            <span class="k">if</span> <span class="o">(</span><span class="n">dto</span><span class="o">.</span><span class="na">getFile</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">dto</span><span class="o">.</span><span class="na">getFile_uid</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">sql</span> <span class="o">=</span> <span class="s">"update cafe_board set file=?, file_uid=? where num=?"</span><span class="o">;</span>
                <span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
					
                <span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getFile</span><span class="o">());</span>
                <span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getFile_uid</span><span class="o">());</span>
                <span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getNum</span><span class="o">());</span>
					
                <span class="n">pstmt</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
            <span class="o">}</span>
				
            <span class="n">sql</span> <span class="o">=</span> <span class="s">"update cafe_board set title=?, content=? where num=?"</span><span class="o">;</span>
            <span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
				
            <span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getTitle</span><span class="o">());</span>
            <span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getContent</span><span class="o">());</span>
            <span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getNum</span><span class="o">());</span>
				
            <span class="n">ret</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
				
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"DAO : ê¸€ ìˆ˜ì • ì™„ë£Œ"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">finally</span> <span class="o">{</span>
        <span class="n">closeDB</span><span class="o">();</span>
    <span class="o">}</span>
		
    <span class="k">return</span> <span class="n">ret</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì „ë‹¬ë˜ì–´ ì˜¨ <code class="language-plaintext highlighter-rouge">DTO</code>ì— íŒŒì¼ëª… ì •ë³´ê°€ ìˆì„ ë•Œì—ë§Œ ì—…ë°ì´íŠ¸ê°€ ë˜ë„ë¡ ìˆ˜ì •í–ˆë‹¤.</li>
  <li>ì´ë ‡ê²Œ í•˜ë‹ˆê¹Œ ê·¸ë™ì•ˆ ê³ ë¯¼í–ˆë˜ ë¬¸ì œë“¤ì´ ì‹¹ í•´ê²°ë˜ì—ˆë‹¤.</li>
  <li>
    <p>ì—­ì‹œ ê·¼ë³¸ì ì¸ ì›ì¸ì„ ì œê±°í–ˆì–´ì•¼â€¦</p>
  </li>
  <li>ì´ë ‡ê²Œ ë¬¸ì œ í•´ê²°~!! ğŸ‘</li>
</ul>
:ET