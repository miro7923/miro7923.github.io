I"ü?<ul>
  <li>ì‘ì„±ì¼ : 2022.05.17</li>
  <li>
    <p>ì‘ì„±ì : í™©ìœ ì§„</p>
  </li>
  <li>íŒ€ì› : ê¹€ì§„ì˜, ë°•ìŠ¹ì§€, ë°˜í˜„ë¹ˆ, ì˜¤ì„±ì€, ì˜¤ì€í˜„, í™©ìœ ì§„</li>
  <li>íŒ€ì¥ : í™©ìœ ì§„</li>
  <li>ë¶€íŒ€ì¥ : ì˜¤ì„±ì€</li>
  <li>GitHub Repository : <a href="https://github.com/miro7923/Uno-Mas">https://github.com/miro7923/Uno-Mas</a><br /><br /><br /></li>
</ul>

<h1 id="ê°œë°œí™˜ê²½">ê°œë°œí™˜ê²½</h1>
<ul>
  <li>MacBook Air (M1, 2020)</li>
  <li>OpenJDK 8</li>
  <li>Spring Tool Suite 4.14.0</li>
  <li>Spring framework 4.3.1.RELEASE</li>
  <li>Tomcat 8.5</li>
  <li>MySQL Workbench 8.0.19<br /><br /><br /></li>
</ul>

<h1 id="ê¸°ê°„">ê¸°ê°„</h1>
<ul>
  <li>2022.4.13 ~ 2022.5.27<br /><br /><br /></li>
</ul>

<h1 id="ì£¼ì œ">ì£¼ì œ</h1>
<ul>
  <li>ì›¹ ë°±ì—”ë“œ ìˆ˜ì—… ì¤‘ ë§ˆì§€ë§‰ ê³¼ì œë¡œ íŒ€ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ê²Œ ë˜ì—ˆë‹¤.</li>
  <li>ì¡°ê±´ì€ <code class="language-plaintext highlighter-rouge">Spring</code> ê¸°ë°˜ìœ¼ë¡œ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì œì‘í•˜ëŠ” ê²ƒì´ë‹¤.</li>
  <li>ì´ íŒ€ì›ì€ 6ëª…ì´ë©°, ìš°ë¦¬ íŒ€ì€ <code class="language-plaintext highlighter-rouge">1ì¸ ê°€êµ¬ë¥¼ ìœ„í•œ ì‡¼í•‘ëª°</code>ì„ ì£¼ì œë¡œ ì •í–ˆë‹¤.</li>
  <li>íŒ€ ì´ë¦„ìœ¼ë¡œ ì •í•´ì§„ <code class="language-plaintext highlighter-rouge">Uno mÃ¡s</code>ëŠ” ìŠ¤í˜ì¸ì–´ë¡œ <code class="language-plaintext highlighter-rouge">í•˜ë‚˜ ë”</code>ë¼ëŠ” ëœ»ì´ë‹¤. <br /><br /><br /></li>
</ul>

<h1 id="ì§„í–‰ìƒí™©">ì§„í–‰ìƒí™©</h1>

<p align="center"><img src="../../assets/images/unomas_reviewImg.png" width="900" /></p>

<ul>
  <li>ìƒí’ˆ í›„ê¸°ê¸€ì— ì´ë¯¸ì§€ í•˜ë‚˜ë¥¼ ì²¨ë¶€í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„í–ˆê¸° ë•Œë¬¸ì— í›„ê¸°ê¸€ì— ë“±ë¡ë˜ëŠ” ì´ë¯¸ì§€ì˜ ì—…ë¡œë“œ ë° ìˆ˜ì •ê³¼ ì‚­ì œê°€ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆë‹¤. ì—…ë¡œë“œ ìì²´ëŠ” <code class="language-plaintext highlighter-rouge">MultipartFile</code>ë¡œ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆì—ˆì§€ë§Œ ìˆ˜ì • ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ê³¼ì •ì´ ë§Œë§Œì¹˜ ì•Šì•˜ê¸° ë•Œë¬¸ì— ê¸°ë¡ìœ¼ë¡œ ë‚¨ê¸´ë‹¤.</li>
</ul>

<h2 id="productmapperxml">productMapper.xml</h2>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;update</span> <span class="na">id=</span><span class="s">"updateReview"</span><span class="nt">&gt;</span>
    UPDATE board_review
    SET review_title = #{review_title}, review_content = #{review_content}, review_rating = #{review_rating}, review_image = #{review_image}
    WHERE review_num = #{review_num}
<span class="nt">&lt;/update&gt;</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">DB</code> ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•œ ì¿¼ë¦¬ë¬¸ì—ì„œëŠ” ë³„ë„ì˜ ì¡°ê±´ë¬¸ ì—†ì´ ì…ë ¥ë°›ì€ ë°ì´í„°ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì—¬ê¸°ê¹Œì§€ ì˜¤ê¸° ì „ì— í›„ê¸°ê¸€ê³¼ í•¨ê»˜ ì—…ë¡œë“œ ë˜ëŠ” ì´ë¯¸ì§€ íŒŒì¼ëª…ì— ëŒ€í•œ ê²€ì¦ì„ ê±°ì¹œ í›„ ì¶”ê°€ ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.</li>
</ul>

<h2 id="productcontrollerjava">ProductController.java</h2>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"/modify_review"</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="nc">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">modifyReviewPOST</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> 
        <span class="nd">@RequestParam</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"review_image"</span><span class="o">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span> <span class="nc">MultipartFile</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="nc">BoardReviewVO</span> <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BoardReviewVO</span><span class="o">();</span>
    <span class="n">vo</span><span class="o">.</span><span class="na">setReview_num</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"review_num"</span><span class="o">)));</span>
    <span class="n">vo</span><span class="o">.</span><span class="na">setProd_num</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"prod_num"</span><span class="o">)));</span>
    <span class="n">vo</span><span class="o">.</span><span class="na">setReview_content</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"review_content"</span><span class="o">));</span>
    <span class="n">vo</span><span class="o">.</span><span class="na">setReview_rating</span><span class="o">(</span><span class="nc">Float</span><span class="o">.</span><span class="na">parseFloat</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"review_rating"</span><span class="o">)));</span>
    <span class="n">vo</span><span class="o">.</span><span class="na">setReview_title</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"review_title"</span><span class="o">));</span>
    <span class="n">vo</span><span class="o">.</span><span class="na">setUser_num</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"user_num"</span><span class="o">)));</span>
		
    <span class="nc">String</span> <span class="n">reviewImg</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">getReviewImg</span><span class="o">(</span><span class="n">vo</span><span class="o">.</span><span class="na">getReview_num</span><span class="o">());</span>
    <span class="nc">String</span> <span class="n">uploadImgName</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"uploadImgName"</span><span class="o">);</span>

    <span class="c1">// ì—…ë¡œë“œ ëœ íŒŒì¼ì´ ìˆì„ ë•Œ </span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
        <span class="c1">// ê¸°ì¡´ì— ì €ì¥ëœ ì´ë¯¸ì§€ê°€ ì—†ëŠ” ê²½ìš° íŒŒì¼ì´ë¦„ ìƒì„±</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">reviewImg</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">reviewImg</span> <span class="o">=</span> <span class="n">convertImgName</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getOriginalFilename</span><span class="o">(),</span> <span class="n">vo</span><span class="o">.</span><span class="na">getReview_num</span><span class="o">());</span>
        <span class="o">}</span>
        
        <span class="c1">// íŒŒì¼ ìƒˆë¡œ ì—…ë¡œë“œ </span>
        <span class="nc">File</span> <span class="n">targetFile</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">reviewImgUploatPath</span><span class="o">,</span> <span class="n">reviewImg</span><span class="o">);</span>
        <span class="nc">FileCopyUtils</span><span class="o">.</span><span class="na">copy</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(),</span> <span class="n">targetFile</span><span class="o">);</span>
        <span class="n">vo</span><span class="o">.</span><span class="na">setReview_image</span><span class="o">(</span><span class="n">reviewImg</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">// ì—…ë¡œë“œ ëœ íŒŒì¼ì´ ì—†ì„ ë•Œ</span>
    <span class="k">else</span> <span class="o">{</span> 
        <span class="c1">// ê¸°ì¡´ì— ì—…ë¡œë“œ ëœ íŒŒì¼ì´ ì—†ê±°ë‚˜ ê¸€ì„ ìˆ˜ì •í•˜ë©° ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•œ ê²½ìš°</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">uploadImgName</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"ì´ë¯¸ì§€ ì„ íƒ"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">reviewImg</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// ê¸°ì¡´ì— ì—…ë¡œë“œ ëœ íŒŒì¼ì´ ìˆìœ¼ë©´ ì„œë²„ì—ì„œ ì‚­ì œ</span>
                <span class="nc">File</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">reviewImgUploatPath</span> <span class="o">+</span> <span class="nc">File</span><span class="o">.</span><span class="na">separator</span> <span class="o">+</span> <span class="n">reviewImg</span><span class="o">);</span>

                <span class="k">if</span> <span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span>
                    <span class="n">f</span><span class="o">.</span><span class="na">delete</span><span class="o">();</span>
            <span class="o">}</span>
            
            <span class="c1">// ê¸°ì¡´ íŒŒì¼ëª… ì‚­ì œ</span>
            <span class="n">vo</span><span class="o">.</span><span class="na">setReview_image</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">// ê¸°ì¡´ì— ì—…ë¡œë“œ ëœ íŒŒì¼ì´ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ì‚¬ìš©</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="n">vo</span><span class="o">.</span><span class="na">setReview_image</span><span class="o">(</span><span class="n">uploadImgName</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
		
    <span class="n">service</span><span class="o">.</span><span class="na">modifyReview</span><span class="o">(</span><span class="n">vo</span><span class="o">);</span>
		
    <span class="k">return</span> <span class="s">"redirect:/product/product_detail?prod_num="</span> <span class="o">+</span> <span class="n">vo</span><span class="o">.</span><span class="na">getProd_num</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ë§¤í¼ì— í›„ê¸°ê¸€ì— ëŒ€í•œ ì •ë³´ë¥¼ ë³´ë‚¼ ë•Œ <code class="language-plaintext highlighter-rouge">BoardReviewVO</code>ë¥¼ ì‚¬ìš©í•´ì„œ ë³´ë‚´ëŠ”ë° ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ë•Œ ì´ë¯¸ì§€ íŒŒì¼ì— ëŒ€í•œ ì •ë³´ë„ ì„¤ì •í•´ ì£¼ì§€ ì•Šìœ¼ë©´ <code class="language-plaintext highlighter-rouge">VO</code> ì†ì˜ ì´ë¯¸ì§€ íŒŒì¼ëª… í•„ë“œëŠ” <code class="language-plaintext highlighter-rouge">null</code>ë¡œ ë‚¨ì•„ìˆëŠ” ìƒíƒœë¡œ ë§¤í¼ì— ì „ë‹¬ë  ê²ƒì´ë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´ ê¸°ì¡´ì— ì„œë²„ì— ì—…ë¡œë“œ ëœ ì´ë¯¸ì§€íŒŒì¼ì´ ìˆëŠ”ë°ë„ DB ë°ì´í„° ìƒì—ì„œëŠ” ì´ë¯¸ì§€ íŒŒì¼ëª… ì •ë³´ê°€ ì—†ê¸° ë•Œë¬¸ì— í™”ë©´ì— ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë˜ì„œ ì²¨ë¶€íŒŒì¼ì´ í¬í•¨ëœ ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ë•Œì—” ìœ„ì™€ ê°™ì´ ë¶„ê¸°ë¥¼ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•´ ì£¼ê²Œ í–ˆë‹¤.<br /><br /><br /></li>
</ul>

<h1 id="êµ¬í˜„í•˜ë©°-í–ˆë˜-ê³ ë¯¼">êµ¬í˜„í•˜ë©° í–ˆë˜ ê³ ë¯¼</h1>
<ul>
  <li>ê¸€ë¡œ ì •ë¦¬í•˜ê³  ë³´ë‹ˆ ë˜ ê°„ë‹¨í•´ ë³´ì´ëŠ”ë° ì´ ë¡œì§ì„ ì§œê¸°ê¹Œì§€ ì—¬ëŸ¬ ë²ˆì˜ ì‹¤íŒ¨ê°€ ìˆì—ˆë‹¤.</li>
  <li>ê°€ì¥ ê³ ë¯¼í–ˆë˜ ê²ƒì€ ì‚¬ìš©ìê°€ ê¸€ì„ ìˆ˜ì •í•˜ë©´ì„œ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí–ˆëŠ”ì§€ ì•„ë‹Œì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ì—ˆë‹¤. ë‹¨ìˆœíˆ <code class="language-plaintext highlighter-rouge">file</code>ë¡œ ë„˜ì–´ì˜¨ ì •ë³´ê°€ ìˆê³  ì—†ê³ ë¡œ ë”°ì§ˆ ìˆ˜ ì—†ì—ˆê¸° ë•Œë¬¸ì´ë‹¤. <code class="language-plaintext highlighter-rouge">file</code>íƒ€ì…ì˜ ì¸í’‹íƒœê·¸ íŠ¹ì„±ìƒ ê²Œì‹œê¸€ì„ ì‘ì„±í•  ë•Œ íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ì§€ ì•Šìœ¼ë©´ ì‚¬ì§„ ì²¨ë¶€ ì˜ì—­ì˜ ì‚­ì œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì„œ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•´ë„ ê°’ì´ ë¹„ì–´ìˆê³  ê¸°ì¡´ì— ì—…ë¡œë“œí–ˆë˜ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ëŠ” ë™ì‘ì„ í•˜ì§€ ì•Šì•„ë„ ê°’ì´ ë¹„ì–´ìˆë‹¤. ì¦‰ ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ë•Œ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¥¼ ì²¨ë¶€í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ í•­ìƒ ë¹„ì–´ìˆëŠ” ìƒíƒœë¡œ ì „ì†¡ë˜ëŠ” ê²ƒì´ë‹¤.</li>
</ul>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;c:choose&gt;</span>
    <span class="nt">&lt;c:when </span><span class="na">test=</span><span class="s">"</span><span class="si">${</span><span class="n">vo</span><span class="o">.</span><span class="na">review_image</span> <span class="o">==</span> <span class="kc">null</span> <span class="si">}</span><span class="s">"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"uploadImgName"</span> <span class="na">id=</span><span class="s">"uploadImgName"</span> <span class="na">value=</span><span class="s">"ì´ë¯¸ì§€ ì„ íƒ"</span>
            <span class="na">readonly</span> <span class="na">name=</span><span class="s">"uploadImgName"</span><span class="nt">&gt;</span> 
    <span class="nt">&lt;/c:when&gt;</span>
    <span class="nt">&lt;c:otherwise&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"uploadImgName"</span> <span class="na">id=</span><span class="s">"uploadImgName"</span> <span class="na">value=</span><span class="s">"${vo.review_image }"</span>
            <span class="na">readonly</span> <span class="na">name=</span><span class="s">"uploadImgName"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/c:otherwise&gt;</span>
<span class="nt">&lt;/c:choose&gt;</span>
<span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"site-btn"</span> <span class="na">for=</span><span class="s">"uploadImg"</span> <span class="na">id=</span><span class="s">"uploadBtn"</span><span class="nt">&gt;</span>ì—…ë¡œë“œ<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"site-btn"</span> <span class="na">onclick=</span><span class="s">"removeImg();"</span><span class="nt">&gt;</span>ì‚­ì œ<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">id=</span><span class="s">"uploadImg"</span> <span class="na">name=</span><span class="s">"review_image"</span> <span class="na">oninput=</span><span class="s">"checkFileName();"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<ul>
  <li>ë·° í˜ì´ì§€ UI ë””ìì¸ì„ í•˜ë©° ì—…ë¡œë“œ í•˜ë ¤ëŠ” íŒŒì¼ëª…ì„ ì¶œë ¥í•˜ëŠ” ì¸í’‹ íƒœê·¸ë¥¼ ë¶„ë¦¬í•´ ë’€ê¸° ë•Œë¬¸ì— íŒŒì¼ëª…ì´ ì¶œë ¥ë˜ëŠ” ì¸í’‹ íƒœê·¸ì˜ ê°’ì— ë”°ë¼ ê¸°ì¡´ì— ì—…ë¡œë“œ ëœ ì´ë¯¸ì§€ íŒŒì¼ì˜ ì¡´ì¬ ìœ ë¬´ë¥¼ í™•ì¸í•˜ë„ë¡ ì„¤ê³„í–ˆë‹¤.<br /><br /><br /></li>
</ul>

<h1 id="ë§ˆê°ê¹Œì§€">ë§ˆê°ê¹Œì§€</h1>
<ul>
  <li><code class="language-plaintext highlighter-rouge">D-10</code></li>
</ul>
:ET